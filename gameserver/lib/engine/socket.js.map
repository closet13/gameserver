{"version":3,"sources":["../../src/engine/socket.js"],"names":[],"mappings":";;;;;AAGA,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,OAAO,GAAG,EAAE,CAAC;;AAEjB,MAAM,CAAC,OAAO,CAAC,OAAO,GAAG,UAAC,UAAU,EAAI;;AAEpC,QAAI,EAAE,GAAG,UAAU,CAAC,GAAG,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC,UAAU,CAAC,OAAO,EAAE;AAC/D,oBAAY,EAAE,IAAI,GAAG,EAAE,GAAG,EAAE;AAC5B,mBAAW,EAAE,IAAI,GAAG,EAAE,GAAG,EAAE;KAC9B,CAAC,CAAC;;AAEH,cAAU,CAAC,GAAG,CAAC,EAAE,CAAC,YAAY,EAAE,UAAU,MAAM,EAAE;;AAE9C,kBAAU,CAAC,aAAa,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC;;AAE/C,cAAM,CAAC,EAAE,CAAC,OAAO,EAAE,UAAC,IAAI,EAAI;AACxB,mBAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;AAClB,uBAAW,CAAC,YAAK;AACb,uBAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;AAC1B,sBAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;;AAE1B,sBAAM,CAAC,IAAI,CAAC,OAAO,EAAE,EAAC,KAAK,aAAW,IAAI,AAAE,EAAC,CAAC,CAAC;aAClD,EAAE,IAAI,CAAC,CAAC;SAEZ,CAAC,CAAC;;AAEH,cAAM,CAAC,EAAE,CAAC,GAAG,EAAE,UAAC,CAAC,EAAI;AACjB,sBAAU,CAAC,aAAa,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC;SAC5D,CAAC,CAAC;KAEN,CAAC,CAAC;AACH,cAAU,CAAC,GAAG,CAAC,GAAG,CAAC,UAAU,MAAM,EAAE,IAAI,EAAE;AACvC,eAAO,CAAC,GAAG,CAAC,6BAA6B,CAAC,CAAC;;AAE3C,YAAI,UAAU,CAAC,IAAI,EAAE;AACjB,gBAAI,EAAE,CAAC;AACP,kBAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SACxB,MACI;AACD,gBAAI,CAAC,IAAI,KAAK,CAAC,mBAAmB,CAAC,CAAC,CAAC;SACxC;KACJ,CAAC,CAAC;CAEN,CAAC","file":"socket.js","sourcesContent":["/**\n * Created by santi8ago8 on 06/03/15.\n */\nlet _ = require('lodash');\nlet pending = [];\n\nmodule.exports.Sockets = (gameServer)=> {\n\n    var io = gameServer._io = require('socket.io')(gameServer._server, {\n        pingInterval: 1000 * 60 * 60,\n        pingTimeout: 1000 * 60 * 60\n    });\n\n    gameServer._io.on('connection', function (socket) {\n\n        gameServer.triggerPlugin('connection', socket);\n\n        socket.on('hello', (name)=> {\n            console.log(name);\n            setInterval(()=> {\n                console.log(\"emit hello\");\n                socket.emit('helloempty');\n                //TODO. rem\n                socket.emit(\"hello\", {greet: `Hello ${name}`});\n            }, 1000);\n\n        });\n\n        socket.on(\"c\", (c)=> {\n            gameServer.triggerPlugin(\"s:\" + c.c, c.d, socket.player);\n        });\n\n    });\n    gameServer._io.use(function (socket, next) {\n        console.log('a user connected middleware');\n        //TODO: check max players.\n        if (gameServer.open) {\n            next();\n            socket.emit('login');\n        }\n        else {\n            next(new Error('Game server close'));\n        }\n    });\n\n};\n\n"]}