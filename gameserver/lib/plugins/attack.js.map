{"version":3,"sources":["../../src/plugins/attack.js"],"names":[],"mappings":";;;;;;;;;;;;;;AAIA,IAAI,OAAO,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;AACpC,IAAI,MAAM,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC,MAAM,CAAC;AAC3C,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;IAEpB,MAAM;cAAN,MAAM;;AACG,aADT,MAAM,GACM;8BADZ,MAAM;;AAEJ,mCAFF,MAAM,6CAEI;KACX;;iBAHC,MAAM;;eAKD,iBAAC,EAAE,EAAE;AACR,gBAAI,CAAC,MAAM,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;AAC1C,gBAAI,CAAC,EAAE,GAAG,EAAE,CAAC;AACb,gBAAI,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;SACzC;;;eAEE,aAAC,IAAI,EAAE,MAAM,EAAE;;;AAGd,gBAAI,EAAE,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,EAAC,GAAG,EAAE,IAAI,CAAC,EAAE,EAAC,CAAC,CAAC;AAClD,gBAAI,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,EAAC,GAAG,EAAE,IAAI,CAAC,MAAM,EAAC,CAAC,CAAC;;AAExD,cAAE,CAAC,MAAM,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC;;AAE5C,gBAAI,EAAE,CAAC,MAAM,GAAG,CAAC,EAAE;AACf,kBAAE,CAAC,MAAM,GAAG,CAAC,CAAC;;aAEjB;;;SAIJ;;;WA1BC,MAAM;GAAS,MAAM;;AA+B3B,MAAM,CAAC,OAAO,GAAG,GAAG,CAAC;;AAErB,MAAM,CAAC,OAAO,CAAC,MAAM,GAAG,MAAM,CAAC","file":"attack.js","sourcesContent":["/**\n * Created by santi8ago8 on 11/11/15.\n */\n\nlet request = require('superagent');\nvar Plugin = require('./../plugin').Plugin;\nlet _ = require('lodash');\n\nclass Attack extends Plugin {\n    constructor() {\n        super();\n    }\n\n    enabled(gs) {\n        this.logger.info('Attack plugin enabled');\n        this.gs = gs;\n        this.on('s:hit', this.hit.bind(this));\n    }\n\n    hit(data, socket) {\n        //this.logger.info('hit', data);\n\n        let to = _.find(this.gs._players, {_id: data.to});\n        let from = _.find(this.gs._players, {_id: data.sender});\n\n        to.health -= Math.floor(Math.random() * 10);\n\n        if (to.health < 0) {\n            to.health = 0;\n            //TODO: dieeeee...\n        }\n\n        //TODO: send updates...\n\n    }\n\n}\n\n\nAttack.version = 0.1;\n\nmodule.exports.Attack = Attack;"]}